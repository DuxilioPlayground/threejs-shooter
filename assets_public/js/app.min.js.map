{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.min.js","js_dev/components/boxes.js","js_dev/components/characters.js","js_dev/components/index.js","js_dev/components/playerWeapon.js","js_dev/config.json","js_dev/libs/AnimMD2.js","js_dev/libs/Character/charactersConfig.js","js_dev/libs/Character/index.js","js_dev/libs/lockControlsHelper.js","js_dev/libs/mouseHelper.js","js_dev/libs/movementHelper.js","js_dev/libs/utils.js","js_dev/libs/worldHelper.js","js_dev/main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_worldHelper","_worldHelper2","init","scene","callback","_this","this","_scene","generateBoxes","boxes","boxes2","concat","_addBoxesToScene","boxMeshes","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","mesh","add","err","../libs/worldHelper","2","_Character","_Character2","characters","characterConfigs","x","character","config","getRaw","root","push","_characters","getCharacters","update","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","../libs/Character","3","playerWeapon","_playerWeapon","_playerWeapon2","_boxes","_boxes2","_characters2","./boxes","./characters","./playerWeapon","4","_AnimMD","_AnimMD2","_movementHelper","_movementHelper2","camera","_weapon","md2","skin","animTimeScale","onCreate","_mesh","scale","set","rotation","y","Math","PI","position","_sounds","shotgunFired","_positionAnis","breathing","currOffset","currAniDirection","aniSpeed","maxOffset","updateProp","updateAxis","walking","_initSounds","_animationCallbacks","_bindEvents","onAnimation","name","currAniName","getCurrMovement","_updatePositionAni","listener","THREE","AudioListener","Audio","load","details","_this2","document","body","addEventListener","_triggerAction","actionName","weapon","shotgunFiredSound","children","animationCallbacks","isPlaying","playAnimation","play","pow","../libs/AnimMD2","../libs/movementHelper","5","movement","speed","jumpHeight","enableSuperJump","paths","img","models","sounds","6","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_config","_config2","AnimMD2","options","loader","MD2Loader","_options","_clock","Clock","geo","computeBoundingBox","_createMD2Part","ImageUtils","loadTexture","geometry","skinMap","materialWireframe","MeshLambertMaterial","color","wireframe","morphTargets","morphNormals","materialTexture","map","Mesh","castShadow","receiveShadow","_playingAnimation","_mixer","AnimationMixer","animation","playOnce","mixer","timeScale","clip","AnimationClip","findByName","animations","action","AnimationAction","time","setLocalRoot","addAction","setTimeout","removeAction","duration","delta","getDelta","../config","7","ratamahatta","path","skins","weapons","ogro","8","_typeof","constructor","_charactersConfig","_charactersConfig2","Character","userOptions","arguments","assign","charConfig","_createCharacter","_eventListeners","_character","event","listeners","forEach","MD2Character","onLoadComplete","setSkin","setAnimation","setWeapon","z","_triggerEvent","baseUrl","loadParts","idx","../../config","./charactersConfig","9","element","controls","_controls","PointerLockControls","_element","getControls","getEnabled","enabled","_requestLock","bind","_onLockChange","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","console","log","10","_raycaster","Raycaster","_mouse","Vector2","_camera","node","querySelector","setAttribute","window","_onMouseMove","clientX","innerWidth","clientY","innerHeight","checkCollidingWithObjects","objects","maxDistance","raycaster","far","setFromCamera","intersects","intersectObjects","object","material","11","collisionObjects","_collisionObjects","Vector3","_movement","forward","backward","right","left","canJump","_velocity","_prevTime","performance","now","_bindKeyEvents","indexOf","checkMovement","velocity","movementSpeed","isOnObject","_checkObjectsCollision","max","controlsObject","getObject","translateZ","translateY","translateX","ray","origin","copy","intersections","_ref","keyCode","_checkKeys","_ref2","setToVal","12","rand","min","floor","random","13","_utils","_utils2","generateRenderer","clearHex","renderer","WebGLRenderer","setClearColor","setPixelRatio","devicePixelRatio","setSize","generateFloor","PlaneGeometry","rotateX","vertices","vertex","_i","_l","faces","face","colors","j","Color","_j","vertexColors","MeshBasicMaterial","VertexColors","amount","texturePath","textureLoader","TextureLoader","doGenerate","crateTexture","_generateBox","width","height","depth","rgb","texture","box","BoxGeometry","MeshPhongMaterial","./utils","14","_interopRequireWildcard","newObj","hasOwnProperty","Scene","PerspectiveCamera","light","HemisphereLight","floorMesh","containerNode","appendChild","domElement","_lockControlsHelper2","components","_mouseHelper2","collidingBoxes","remove","stats","begin","componentsToUpdate","component","render","end","requestAnimationFrame","initStats","Stats","setMode","style","top","_lockControlsHelper","_mouseHelper","_components","values","filter","./components","./config","./libs/lockControlsHelper","./libs/mouseHelper","./libs/movementHelper","./libs/utils","./libs/worldHelper"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _worldHelper = require('../libs/worldHelper');\n\nvar _worldHelper2 = _interopRequireDefault(_worldHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  init: function init(scene, callback) {\n    var _this = this;\n\n    this._scene = scene;\n\n    _worldHelper2.default.generateBoxes(250, '/crate3.jpg', function (boxes) {\n      _worldHelper2.default.generateBoxes(250, '/crate-tnt-1.jpg', function (boxes2) {\n        boxes = boxes.concat(boxes2);\n        _this._addBoxesToScene(boxes);\n        callback(boxes);\n      });\n    });\n  },\n  _addBoxesToScene: function _addBoxesToScene(boxMeshes) {\n    var scene = this._scene;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = boxMeshes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var mesh = _step.value;\n\n        scene.add(mesh);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }\n};\n\n},{\"../libs/worldHelper\":13}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Character = require('../libs/Character');\n\nvar _Character2 = _interopRequireDefault(_Character);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  init: function init(scene) {\n    var characters = [];\n    var characterConfigs = [{\n      x: 20,\n      character: 'ogro'\n    }, {\n      x: -20\n    }];\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = characterConfigs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var config = _step.value;\n\n        var character = new _Character2.default(config);\n        scene.add(character.getRaw().root);\n        characters.push(character);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    this._characters = characters;\n  },\n  getCharacters: function getCharacters() {\n    return this._characters;\n  },\n  update: function update() {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = this._characters[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var character = _step2.value;\n\n        character.update();\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n};\n\n},{\"../libs/Character\":8}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.characters = exports.boxes = exports.playerWeapon = undefined;\n\nvar _playerWeapon = require('./playerWeapon');\n\nvar _playerWeapon2 = _interopRequireDefault(_playerWeapon);\n\nvar _boxes = require('./boxes');\n\nvar _boxes2 = _interopRequireDefault(_boxes);\n\nvar _characters = require('./characters');\n\nvar _characters2 = _interopRequireDefault(_characters);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.playerWeapon = _playerWeapon2.default;\nexports.boxes = _boxes2.default;\nexports.characters = _characters2.default;\n\n},{\"./boxes\":1,\"./characters\":2,\"./playerWeapon\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AnimMD = require('../libs/AnimMD2');\n\nvar _AnimMD2 = _interopRequireDefault(_AnimMD);\n\nvar _movementHelper = require('../libs/movementHelper');\n\nvar _movementHelper2 = _interopRequireDefault(_movementHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  init: function init(camera) {\n    var _this = this;\n\n    this._weapon = new _AnimMD2.default({\n      md2: '/shotgun/hud/Dreadus-Shotgun.md2',\n      skin: '/shotgun/hud/Dreadus-Shotgun.jpg',\n      animTimeScale: 2,\n      onCreate: function onCreate(mesh) {\n        _this._mesh = mesh;\n\n        mesh.scale.set(.05, .05, .05);\n        mesh.rotation.y = Math.PI / 2;\n        mesh.position.x -= 1;\n\n        camera.add(mesh);\n        mesh.add(_this._sounds.shotgunFired);\n      }\n    });\n\n    this._positionAnis = {\n      breathing: {\n        currOffset: 0,\n        currAniDirection: 1,\n        aniSpeed: .0002,\n        maxOffset: .01,\n        updateProp: 'rotation',\n        updateAxis: 'z'\n      },\n      walking: {\n        currOffset: 0,\n        currAniDirection: 1,\n        aniSpeed: .009,\n        maxOffset: .1,\n        updateProp: 'position',\n        updateAxis: 'z'\n      }\n    };\n\n    this._sounds = {};\n    this._initSounds(camera);\n\n    this._animationCallbacks = [];\n\n    this._bindEvents();\n  },\n  onAnimation: function onAnimation(name, callback) {\n    this._animationCallbacks[name] = callback;\n  },\n  update: function update() {\n    var currAniName = _movementHelper2.default.getCurrMovement() === 'walking' ? 'walking' : 'breathing';\n    this._updatePositionAni(currAniName);\n    this._weapon.update();\n  },\n  _initSounds: function _initSounds(camera) {\n    var listener = new THREE.AudioListener();\n    camera.add(listener);\n\n    var shotgunFired = new THREE.Audio(listener);\n    shotgunFired.load('assets_public/sounds/shotgunFired.mp3');\n    this._sounds['shotgunFired'] = shotgunFired;\n  },\n  _updatePositionAni: function _updatePositionAni(name) {\n    var mesh = this._mesh;\n    var details = this._positionAnis[name];\n\n    var aniSpeed = details.aniSpeed,\n        currOffset = details.currOffset,\n        currAniDirection = details.currAniDirection,\n        maxOffset = details.maxOffset,\n        updateProp = details.updateProp,\n        updateAxis = details.updateAxis;\n\n\n    if (!mesh) {\n      return;\n    }\n\n    if (currAniDirection === 1) {\n      this._positionAnis[name].currOffset -= aniSpeed;\n      mesh[updateProp][updateAxis] -= aniSpeed;\n    } else {\n      this._positionAnis[name].currOffset += aniSpeed;\n      mesh[updateProp][updateAxis] += aniSpeed;\n    }\n\n    if (currOffset <= -maxOffset) {\n      this._positionAnis[name].currAniDirection = 2;\n    } else if (currOffset >= maxOffset) {\n      this._positionAnis[name].currAniDirection = 1;\n    }\n  },\n  _bindEvents: function _bindEvents() {\n    var _this2 = this;\n\n    document.body.addEventListener('click', function () {\n      return _this2._triggerAction('pow');\n    }, false);\n  },\n  _triggerAction: function _triggerAction(actionName) {\n    var weapon = this._weapon;\n    var mesh = this._mesh;\n    var shotgunFiredSound = mesh.children[0];\n    var animationCallbacks = this._animationCallbacks;\n\n    switch (actionName) {\n      case 'pow':\n        if (!shotgunFiredSound.isPlaying) {\n          weapon.playAnimation('pow', true);\n          shotgunFiredSound.play();\n          if (animationCallbacks.pow) {\n            animationCallbacks.pow();\n          }\n        }\n        break;\n    }\n  }\n};\n\n},{\"../libs/AnimMD2\":6,\"../libs/movementHelper\":11}],5:[function(require,module,exports){\nmodule.exports={\n\t\"movement\": {\n\t\t\"speed\": 600,\n\t\t\"jumpHeight\": 350,\n\t\t\"enableSuperJump\": false\n\t},\n    \"paths\": {\n        \"img\": \"assets_public/img\",\n        \"models\": \"assets_public/models\",\n        \"sounds\": \"assets_public/sounds\"\n    }\n}\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AnimMD2 = function () {\n\tfunction AnimMD2(options) {\n\t\tvar _this = this;\n\n\t\t_classCallCheck(this, AnimMD2);\n\n\t\tvar loader = new THREE.MD2Loader();\n\n\t\t//check animTimeScale option property\n\t\toptions.animTimeScale = options.animTimeScale || 1;\n\t\toptions.md2 = _config2.default.paths.models + options.md2;\n\t\toptions.skin = _config2.default.paths.models + options.skin;\n\n\t\t//set class vars\n\t\tthis._options = options;\n\t\tthis._clock = new THREE.Clock();\n\n\t\t//preload md2 and mesh\n\t\tloader.load(options.md2, function (geo) {\n\t\t\tgeo.computeBoundingBox();\n\n\t\t\tvar mesh = _this._mesh = _this._createMD2Part(geo, THREE.ImageUtils.loadTexture(options.skin));\n\t\t\toptions.onCreate(mesh);\n\t\t});\n\t}\n\n\t_createClass(AnimMD2, [{\n\t\tkey: '_createMD2Part',\n\t\tvalue: function _createMD2Part(geometry, skinMap) {\n\t\t\tvar materialWireframe = new THREE.MeshLambertMaterial({ color: 0xffaa00, wireframe: true, morphTargets: true, morphNormals: true });\n\t\t\tvar materialTexture = new THREE.MeshLambertMaterial({ color: 0xffffff, wireframe: false, map: skinMap, morphTargets: true, morphNormals: true });\n\n\t\t\tvar mesh = new THREE.Mesh(geometry, materialTexture);\n\t\t\tmesh.rotation.y = -Math.PI / 2;\n\n\t\t\tmesh.castShadow = true;\n\t\t\tmesh.receiveShadow = true;\n\n\t\t\tmesh.materialTexture = materialTexture;\n\t\t\tmesh.materialWireframe = materialWireframe;\n\n\t\t\tthis._playingAnimation = false;\n\t\t\tthis._mixer = new THREE.AnimationMixer(mesh);\n\t\t\tthis._mesh = mesh;\n\n\t\t\tif (this._options.animation) {\n\t\t\t\tthis.playAnimation(this._options.animation);\n\t\t\t}\n\n\t\t\treturn mesh;\n\t\t}\n\t}, {\n\t\tkey: 'playAnimation',\n\t\tvalue: function playAnimation(name, playOnce) {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (this._playingAnimation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar options = this._options;\n\t\t\tvar mixer = this._mixer = new THREE.AnimationMixer(mesh);\n\t\t\tvar mesh = this._mesh;\n\t\t\tvar timeScale = options.animTimeScale;\n\n\t\t\t//speed animation up by <timeScale>\n\t\t\t//duration is now <duration>/<timeScale>\n\t\t\tmixer.timeScale = timeScale;\n\n\t\t\tif (!mesh) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar clip = THREE.AnimationClip.findByName(mesh.geometry.animations, name);\n\n\t\t\tif (!clip) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar action = new THREE.AnimationAction(clip, mixer.time).setLocalRoot(mesh);\n\n\t\t\tmixer.addAction(action);\n\t\t\tthis._playingAnimation = true;\n\n\t\t\tif (!playOnce) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tmixer.removeAction(action);\n\t\t\t\t_this2._playingAnimation = false;\n\t\t\t}, clip.duration / timeScale * 1000);\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tvar delta = this._clock.getDelta();\n\t\t\tif (this._mixer) this._mixer.update(delta);\n\t\t}\n\t}]);\n\n\treturn AnimMD2;\n}();\n\nexports.default = AnimMD2;\n\n},{\"../config\":5}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\tratamahatta: {\n\t\tpath: '/ratamahatta/',\n\t\tbody: \"ratamahatta.md2\",\n\t\tskins: [\"ratamahatta.png\", \"ctf_b.png\", \"ctf_r.png\", \"dead.png\", \"gearwhore.png\"],\n\t\tweapons: [[\"weapon.md2\", \"weapon.png\"], [\"w_bfg.md2\", \"w_bfg.png\"], [\"w_blaster.md2\", \"w_blaster.png\"], [\"w_chaingun.md2\", \"w_chaingun.png\"], [\"w_glauncher.md2\", \"w_glauncher.png\"], [\"w_hyperblaster.md2\", \"w_hyperblaster.png\"], [\"w_machinegun.md2\", \"w_machinegun.png\"], [\"w_railgun.md2\", \"w_railgun.png\"], [\"w_rlauncher.md2\", \"w_rlauncher.png\"], [\"w_shotgun.md2\", \"w_shotgun.png\"], [\"w_sshotgun.md2\", \"w_sshotgun.png\"]]\n\t},\n\togro: {\n\t\tpath: \"/ogro/\",\n\t\tbody: \"ogro.md2\",\n\t\tskins: [\"grok.jpg\", \"ogrobase.png\", \"arboshak.png\", \"ctf_r.png\", \"ctf_b.png\", \"darkam.png\", \"freedom.png\", \"gib.png\", \"gordogh.png\", \"igdosh.png\", \"khorne.png\", \"nabogro.png\", \"sharokh.png\"],\n\t\tweapons: [[\"weapon.md2\", \"weapon.jpg\"]]\n\t}\n};\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _config = require('../../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _charactersConfig = require('./charactersConfig');\n\nvar _charactersConfig2 = _interopRequireDefault(_charactersConfig);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Character = function () {\n  function Character() {\n    var userOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Character);\n\n    var options = this._options = Object.assign({\n      character: 'ratamahatta',\n      skin: 0,\n      animation: 'stand'\n    }, userOptions);\n\n    var charConfig = _charactersConfig2.default[options.character];\n    var character = this._createCharacter(charConfig);\n\n    this._eventListeners = {};\n    this._clock = new THREE.Clock();\n\n    this._character = character;\n  }\n\n  _createClass(Character, [{\n    key: 'on',\n    value: function on(event, callback) {\n      if (typeof this._eventListeners[event] !== 'array') {\n        this._eventListeners[event] = [];\n      }\n      this._eventListeners[event].push(callback);\n    }\n  }, {\n    key: '_triggerEvent',\n    value: function _triggerEvent(event) {\n      var _this = this;\n\n      var listeners = this._eventListeners[event];\n\n      if ((typeof listeners === 'undefined' ? 'undefined' : _typeof(listeners)) === 'object') {\n        listeners.forEach(function (callback) {\n          callback(_this.getRaw());\n        });\n      }\n    }\n  }, {\n    key: '_createCharacter',\n    value: function _createCharacter(charConfig) {\n      var _this2 = this;\n\n      var options = this._options;\n      var character = new THREE.MD2Character();\n\n      character.scale = .5;\n\n      character.onLoadComplete = function () {\n        _this2.setSkin(options.skin);\n        _this2.setAnimation(options.animation);\n\n        if (typeof options.weapon === 'number') {\n          _this2.setWeapon(options.weapon);\n        }\n\n        if (typeof options.x === 'number') {\n          character.root.position.x = options.x;\n        }\n\n        if (typeof options.y === 'number') {\n          character.root.position.y = options.y;\n        }\n\n        if (typeof options.z === 'number') {\n          character.root.position.z = options.z;\n        }\n\n        _this2._triggerEvent('create');\n      };\n\n      charConfig.baseUrl = _config2.default.paths.models + charConfig.path;\n      character.loadParts(charConfig);\n\n      return character;\n    }\n  }, {\n    key: 'setSkin',\n    value: function setSkin(idx) {\n      //character.skinsBody\n      this._character.setSkin(idx);\n    }\n  }, {\n    key: 'setWeapon',\n    value: function setWeapon(idx) {\n      //character.weapons\n      this._character.setWeapon(idx);\n    }\n  }, {\n    key: 'setAnimation',\n    value: function setAnimation(name) {\n      //character.meshBody.geometry.animations\n      this._character.setAnimation(name);\n    }\n  }, {\n    key: 'getRaw',\n    value: function getRaw() {\n      return this._character;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var delta = this._clock.getDelta();\n      this._character.update(delta);\n    }\n  }]);\n\n  return Character;\n}();\n\nexports.default = Character;\n\n},{\"../../config\":5,\"./charactersConfig\":7}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  init: function init(element, camera, controls) {\n    this._controls = new THREE.PointerLockControls(camera);\n    this._element = element;\n    this._bindEvents();\n  },\n  getControls: function getControls() {\n    return this._controls;\n  },\n  getEnabled: function getEnabled() {\n    return this._controls.enabled;\n  },\n  _bindEvents: function _bindEvents() {\n    document.body.addEventListener('click', this._requestLock.bind(this));\n    document.addEventListener('pointerlockchange', this._onLockChange.bind(this), false);\n    document.addEventListener('mozpointerlockchange', this._onLockChange.bind(this), false);\n    document.addEventListener('webkitpointerlockchange', this._onLockChange.bind(this), false);\n  },\n  _requestLock: function _requestLock() {\n    var element = this._element;\n    element.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;\n    element.requestPointerLock();\n  },\n  _onLockChange: function _onLockChange() {\n    var element = this._element;\n    if (document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element) {\n      console.log('Pointer locked');\n      this._controls.enabled = true;\n    } else {\n      console.log('Pointer lock removed');\n      this._controls.enabled = false;\n    }\n  }\n};\n\n},{}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  init: function init(camera) {\n    this._raycaster = new THREE.Raycaster();\n    this._mouse = new THREE.Vector2();\n    this._camera = camera;\n    this._bindEvents();\n  },\n  _bindEvents: function _bindEvents() {\n    var node = document.querySelector('.cursor');\n    node.setAttribute('style', 'position: absolute; top: 50%; left: 50%; width: 5px; height: 5px; border: solid 1px red; border-radius: 100%; margin: -10px 0 0 -10px; z-index 99;');\n    window.addEventListener('mousemove', this._onMouseMove.bind(this));\n  },\n  _onMouseMove: function _onMouseMove(event) {\n    // calculate mouse position in normalized device coordinates\n    // (-1 to +1) for both components\n    var x = event.clientX / window.innerWidth * 2 - 1;\n    var y = -(event.clientY / window.innerHeight) * 2 + 1;\n\n    this._mouse.x = x;\n    this._mouse.y = y;\n  },\n  checkCollidingWithObjects: function checkCollidingWithObjects(objects) {\n    var maxDistance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    var raycaster = this._raycaster;\n\n    if (maxDistance) {\n      raycaster.far = maxDistance;\n    }\n\n    // update the picking ray with the camera and mouse position\n    raycaster.setFromCamera(this._mouse, this._camera);\n\n    // calculate objects intersecting the picking ray\n    var intersects = raycaster.intersectObjects(objects);\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = intersects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var object = _step.value.object;\n\n        object.material.color.set(0xff0000);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return intersects;\n  }\n};\n\n},{}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  init: function init(controls, collisionObjects, options) {\n    this._controls = controls;\n    this._options = options;\n\n    this._collisionObjects = collisionObjects;\n    this._raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(0, -1, 0), 0, 10);\n\n    this._movement = {\n      forward: false,\n      backward: false,\n      right: false,\n      left: false,\n      canJump: false\n    };\n\n    this._velocity = new THREE.Vector3();\n    this._prevTime = performance.now();\n\n    this._bindKeyEvents();\n  },\n  getCurrMovement: function getCurrMovement() {\n    var movement = this._movement;\n\n    for (var key in movement) {\n      if (!movement[key]) {\n        continue;\n      }\n\n      if (['forward', 'backward', 'right', 'left'].indexOf(key) !== -1 && movement.canJump !== false) {\n        //walking and not jumping\n        return 'walking';\n      } else if (key === 'canJump') {\n        //jumping\n        return 'jumping';\n      } else {\n        //not walking, not jumping = idle\n        return 'idle';\n      }\n    }\n  },\n  checkMovement: function checkMovement() {\n    var controls = this._controls;\n    var velocity = this._velocity;\n    var movement = this._movement;\n    var options = this._options;\n\n    var time = performance.now();\n    var delta = (time - this._prevTime) / 1000;\n\n    //update velocity\n    velocity.x -= velocity.x * 10.0 * delta;\n    velocity.z -= velocity.z * 10.0 * delta;\n    velocity.y -= 9.8 * 100.0 * delta; // 100.0 = mass\n\n    //check directional movement\n    if (movement.forward) velocity.z -= options.movementSpeed * delta;\n    if (movement.backward) velocity.z += options.movementSpeed * delta;\n    if (movement.left) velocity.x -= options.movementSpeed * delta;\n    if (movement.right) velocity.x += options.movementSpeed * delta;\n\n    //objects collision detection\n    var isOnObject = this._checkObjectsCollision();\n    if (isOnObject) {\n      velocity.y = Math.max(0, velocity.y);\n      movement.canJump = true;\n    }\n\n    //update controls\n    var controlsObject = controls.getObject();\n    controlsObject.translateZ(velocity.z * delta);\n    controlsObject.translateY(velocity.y * delta);\n    controlsObject.translateX(velocity.x * delta);\n\n    //detect floor\n    if (controls.getObject().position.y < 20) {\n      velocity.y = 0;\n      controlsObject.position.y = 20;\n      movement.canJump = true;\n    }\n\n    this._prevTime = time;\n  },\n  _checkObjectsCollision: function _checkObjectsCollision() {\n    var raycaster = this._raycaster;\n    var objects = this._collisionObjects;\n    var controls = this._controls;\n\n    raycaster.ray.origin.copy(controls.getObject().position);\n    raycaster.ray.origin.y -= 10;\n\n    var intersections = raycaster.intersectObjects(objects);\n    var isOnObject = intersections.length > 0;\n\n    return isOnObject;\n  },\n  _bindKeyEvents: function _bindKeyEvents() {\n    var _this = this;\n\n    document.addEventListener('keydown', function (_ref) {\n      var keyCode = _ref.keyCode;\n      return _this._checkKeys(keyCode, true);\n    }, false);\n    document.addEventListener('keyup', function (_ref2) {\n      var keyCode = _ref2.keyCode;\n      return _this._checkKeys(keyCode, false);\n    }, false);\n  },\n  _checkKeys: function _checkKeys(keyCode, setToVal) {\n    var options = this._options;\n    switch (keyCode) {\n      case 87:\n        //w\n        this._movement.forward = setToVal;\n        break;\n      case 83:\n        //s\n        this._movement.backward = setToVal;\n        break;\n      case 68:\n        // d\n        this._movement.right = setToVal;\n        break;\n      case 65:\n        // a\n        this._movement.left = setToVal;\n        break;\n      case 32:\n        // space\n        if (setToVal === true) {\n          //keydown\n          if (this._movement.canJump || options.enableSuperJump) {\n            this._velocity.y += this._options.jumpHeight;\n          }\n          this._movement.canJump = false;\n        }\n        break;\n    }\n  }\n};\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = {\n\trand: function rand(min, max) {\n\t\treturn Math.floor(Math.random() * max + min);\n\t}\n};\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  generateRenderer: function generateRenderer(clearHex) {\n    var renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(clearHex);\n    renderer.setPixelRatio(window.devicePixelRatio || 1);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    return renderer;\n  },\n  generateFloor: function generateFloor() {\n    var geometry = new THREE.PlaneGeometry(2000, 2000, 100, 100);\n\n    geometry.rotateX(-Math.PI / 2);\n\n    for (var i = 0, l = geometry.vertices.length; i < l; i++) {\n      var vertex = geometry.vertices[i];\n      vertex.x += Math.random() * 20;\n      vertex.z += Math.random() * 20;\n      vertex.y += Math.random();\n    }\n\n    for (var _i = 0, _l = geometry.faces.length; _i < _l; _i++) {\n      var face = geometry.faces[_i];\n      var colors = [];\n\n      for (var j = 0; j < 3; j++) {\n        var color = new THREE.Color('rgb(' + _utils2.default.rand(100, 180) + ',' + _utils2.default.rand(100, 180) + ',' + _utils2.default.rand(100, 180) + ')');\n        colors.push(color);\n      }\n\n      for (var _j = 0; _j < 3; _j++) {\n        face.vertexColors[_j] = colors[_j];\n      }\n    }\n\n    var material = new THREE.MeshBasicMaterial({ vertexColors: THREE.VertexColors });\n    return new THREE.Mesh(geometry, material);\n  },\n  generateBoxes: function generateBoxes(amount, texturePath, callback) {\n    var _this = this;\n\n    var textureLoader = new THREE.TextureLoader();\n\n    var doGenerate = function doGenerate(crateTexture) {\n      var mesh = void 0;\n      var boxes = [];\n\n      for (var i = 0; i < amount; i++) {\n        mesh = _this._generateBox({\n          width: 20,\n          height: 20,\n          depth: 20,\n          rgb: [55, 81, 159],\n          texture: crateTexture\n        });\n\n        mesh.position.x = Math.floor(Math.random() * 20 - 10) * 20;\n        mesh.position.y = Math.floor(Math.random() * 20) * 20 + 10;\n        mesh.position.z = Math.floor(Math.random() * 20 - 10) * 20;\n\n        mesh.rotation.y = -100;\n        boxes.push(mesh);\n      }\n\n      callback(boxes);\n    };\n\n    textureLoader.load(_config2.default.paths.img + texturePath, function (crateTexture) {\n      doGenerate(crateTexture);\n    });\n  },\n  _generateBox: function _generateBox(options) {\n    var width = options.width;\n    var height = options.height;\n    var depth = options.depth;\n    var rgb = options.rgb;\n    var box = new THREE.BoxGeometry(width, height, depth);\n    var material = void 0;\n\n    if (options.texture) {\n      material = new THREE.MeshPhongMaterial({\n        map: options.texture\n      });\n    } else {\n      material = new THREE.MeshBasicMaterial({\n        vertexColors: THREE.VertexColors\n      });\n\n      var face = void 0;\n      var color = void 0;\n\n      for (var i = 0; i < box.faces.length; i++) {\n        face = box.faces[i];\n        color = new THREE.Color('rgb(' + (rgb[0] + i * 4) + ',' + (rgb[1] + i * 4) + ',' + (rgb[0] + i * 4) + ')');\n        face.color = color;\n      }\n    }\n\n    return new THREE.Mesh(box, material);\n  }\n};\n\n},{\"../config\":5,\"./utils\":12}],14:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _utils = require('./libs/utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _worldHelper = require('./libs/worldHelper');\n\nvar _worldHelper2 = _interopRequireDefault(_worldHelper);\n\nvar _lockControlsHelper = require('./libs/lockControlsHelper');\n\nvar _lockControlsHelper2 = _interopRequireDefault(_lockControlsHelper);\n\nvar _movementHelper = require('./libs/movementHelper');\n\nvar _movementHelper2 = _interopRequireDefault(_movementHelper);\n\nvar _mouseHelper = require('./libs/mouseHelper');\n\nvar _mouseHelper2 = _interopRequireDefault(_mouseHelper);\n\nvar _components = require('./components');\n\nvar components = _interopRequireWildcard(_components);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar scene = null;\nvar camera = null;\nvar renderer = null;\nvar stats = null;\n\nvar componentsToUpdate = Object.values(components).filter(function (_ref) {\n  var update = _ref.update;\n  return typeof update === 'function';\n});\nvar containerNode = document.body;\n\ninitStats();\ninit();\nupdate();\n\nfunction init() {\n  scene = new THREE.Scene();\n  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);\n\n  //light\n  var light = new THREE.HemisphereLight(0xffffff, 0xaaaaaa, 0.6);\n  scene.add(light);\n\n  //floor\n  var floorMesh = _worldHelper2.default.generateFloor();\n  scene.add(floorMesh);\n\n  //renderer\n  renderer = _worldHelper2.default.generateRenderer(0x0f445c);\n  containerNode.appendChild(renderer.domElement);\n\n  _lockControlsHelper2.default.init(containerNode, camera);\n  var controls = _lockControlsHelper2.default.getControls();\n  scene.add(controls.getObject());\n\n  //boxes\n  components.boxes.init(scene, function (boxes) {\n    _movementHelper2.default.init(controls, boxes, {\n      movementSpeed: _config2.default.movement.speed,\n      jumpHeight: _config2.default.movement.jumpHeight,\n      enableSuperJump: _config2.default.movement.enableSuperJump\n    });\n\n    //characters\n    components.characters.init(scene, boxes);\n    _mouseHelper2.default.init(camera);\n\n    //weapon\n    components.playerWeapon.init(camera);\n    components.playerWeapon.onAnimation('pow', function () {\n      var collidingBoxes = _mouseHelper2.default.checkCollidingWithObjects(window.boxes);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = collidingBoxes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var object = _step.value.object;\n\n          scene.remove(object);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    });\n\n    window.boxes = boxes;\n  });\n}\n\nfunction update() {\n  stats.begin();\n\n  if (_lockControlsHelper2.default.getEnabled()) {\n    _movementHelper2.default.checkMovement();\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = componentsToUpdate[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var component = _step2.value;\n\n        component.update();\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n\n  renderer.render(scene, camera);\n\n  stats.end();\n  requestAnimationFrame(update);\n}\n\nfunction initStats() {\n  stats = new Stats();\n  stats.setMode(0);\n\n  stats.domElement.style.position = 'absolute';\n  stats.domElement.style.left = '0px';\n  stats.domElement.style.top = '0px';\n  containerNode.appendChild(stats.domElement);\n}\n\n},{\"./components\":3,\"./config\":5,\"./libs/lockControlsHelper\":9,\"./libs/mouseHelper\":10,\"./libs/movementHelper\":11,\"./libs/utils\":12,\"./libs/worldHelper\":13}]},{},[14])\n\n","import worldHelper from '../libs/worldHelper';\n\nexport default {\n  init(scene, callback) {\n    this._scene = scene;\n\n    worldHelper.generateBoxes(250, '/crate3.jpg', (boxes) => {\n      worldHelper.generateBoxes(250, '/crate-tnt-1.jpg', (boxes2) => {\n        boxes = boxes.concat(boxes2);\n        this._addBoxesToScene(boxes);\n        callback(boxes);\n      });\n    });\n  },\n\n  _addBoxesToScene(boxMeshes) {\n    const scene = this._scene;\n    for (const mesh of boxMeshes) {\n      scene.add(mesh);\n    }\n  }\n};\n","import Character from '../libs/Character';\n\nexport default {\n  init(scene) {\n    const characters = [];\n    const characterConfigs = [{\n      x: 20,\n      character: 'ogro'\n    }, {\n      x: -20\n    }];\n\n    for (const config of characterConfigs) {\n      const character = new Character(config);\n      scene.add(character.getRaw().root);\n      characters.push(character);\n    }\n\n    this._characters = characters;\n  },\n\n  getCharacters() {\n    return this._characters;\n  },\n\n  update() {\n    for (const character of this._characters) {\n      character.update();\n    }\n  }\n};\n","import playerWeapon from './playerWeapon';\nimport boxes from './boxes';\nimport characters from './characters';\n\nexport {playerWeapon, boxes, characters};\n","import AnimMD2 from '../libs/AnimMD2';\nimport movementHelper from '../libs/movementHelper';\n\nexport default {\n  init(camera) {\n    this._weapon = new AnimMD2({\n      md2: '/shotgun/hud/Dreadus-Shotgun.md2',\n      skin: '/shotgun/hud/Dreadus-Shotgun.jpg',\n      animTimeScale: 2,\n      onCreate: (mesh) => {\n        this._mesh = mesh;\n\n        mesh.scale.set(.05,.05,.05);\n        mesh.rotation.y = Math.PI / 2;\n        mesh.position.x -= 1;\n\n        camera.add(mesh);\n        mesh.add(this._sounds.shotgunFired);\n      }\n    });\n\n    this._positionAnis = {\n      breathing: {\n        currOffset: 0,\n        currAniDirection: 1,\n        aniSpeed: .0002,\n        maxOffset: .01,\n        updateProp: 'rotation',\n        updateAxis: 'z'\n      },\n      walking: {\n        currOffset: 0,\n        currAniDirection: 1,\n        aniSpeed: .009,\n        maxOffset: .1,\n        updateProp: 'position',\n        updateAxis: 'z'\n      }\n    };\n\n    this._sounds = {};\n    this._initSounds(camera);\n\n    this._animationCallbacks = [];\n\n    this._bindEvents();\n  },\n\n  onAnimation(name, callback) {\n    this._animationCallbacks[name] = callback;\n  },\n\n  update() {\n    const currAniName = movementHelper.getCurrMovement() === 'walking' ? 'walking' : 'breathing';\n    this._updatePositionAni(currAniName);\n    this._weapon.update();\n  },\n\n  _initSounds(camera) {\n    var listener = new THREE.AudioListener();\n    camera.add(listener);\n\n    var shotgunFired = new THREE.Audio(listener);\n    shotgunFired.load('assets_public/sounds/shotgunFired.mp3');\n    this._sounds['shotgunFired'] = shotgunFired;\n  },\n\n  _updatePositionAni(name) {\n    const mesh = this._mesh;\n    const details = this._positionAnis[name];\n\n    const {\n      aniSpeed,\n      currOffset,\n      currAniDirection,\n      maxOffset,\n      updateProp,\n      updateAxis\n    } = details;\n\n    if (!mesh) {\n      return;\n    }\n\n    if(currAniDirection === 1){\n      this._positionAnis[name].currOffset -= aniSpeed;\n      mesh[updateProp][updateAxis] -= aniSpeed;\n    } else {\n      this._positionAnis[name].currOffset += aniSpeed;\n      mesh[updateProp][updateAxis] += aniSpeed;\n    }\n\n    if(currOffset <= -maxOffset){\n      this._positionAnis[name].currAniDirection = 2;\n    } else if(currOffset >= maxOffset){\n      this._positionAnis[name].currAniDirection = 1;\n    }\n  },\n\n  _bindEvents() {\n    document.body.addEventListener('click', () => this._triggerAction('pow'), false);\n  },\n\n  _triggerAction(actionName) {\n    const weapon = this._weapon;\n    const mesh = this._mesh;\n    const shotgunFiredSound = mesh.children[0];\n    const animationCallbacks = this._animationCallbacks;\n\n    switch(actionName){\n      case 'pow':\n        if(!shotgunFiredSound.isPlaying){\n          weapon.playAnimation('pow', true);\n          shotgunFiredSound.play();\n          if (animationCallbacks.pow) {\n            animationCallbacks.pow();\n          }\n        }\n      break;\n    }\n  }\n};\n","module.exports={\n\t\"movement\": {\n\t\t\"speed\": 600,\n\t\t\"jumpHeight\": 350,\n\t\t\"enableSuperJump\": false\n\t},\n    \"paths\": {\n        \"img\": \"assets_public/img\",\n        \"models\": \"assets_public/models\",\n        \"sounds\": \"assets_public/sounds\"\n    }\n}","import CONFIG from '../config';\n\nexport default class AnimMD2 {\n\tconstructor(options) {\n\t\tconst loader = new THREE.MD2Loader();\n\n\t\t//check animTimeScale option property\n\t\toptions.animTimeScale = options.animTimeScale || 1;\n\t\toptions.md2 = CONFIG.paths.models+options.md2;\n\t\toptions.skin = CONFIG.paths.models+options.skin;\n\n\t\t//set class vars\n\t\tthis._options = options;\n\t\tthis._clock = new THREE.Clock();\n\n\t\t//preload md2 and mesh\n\t\tloader.load(options.md2, (geo) => {\n\t\t\tgeo.computeBoundingBox();\n\n\t\t\tconst mesh = this._mesh = this._createMD2Part(geo, THREE.ImageUtils.loadTexture(options.skin));\n\t\t\toptions.onCreate(mesh);\n\t\t});\n\t}\n\n\t_createMD2Part(geometry, skinMap) {\n\t\tconst materialWireframe = new THREE.MeshLambertMaterial( { color: 0xffaa00, wireframe: true, morphTargets: true, morphNormals: true } );\n\t\tconst materialTexture = new THREE.MeshLambertMaterial( { color: 0xffffff, wireframe: false, map: skinMap, morphTargets: true, morphNormals: true } );\n\n\t\tconst mesh = new THREE.Mesh(geometry, materialTexture);\n\t\tmesh.rotation.y = - Math.PI / 2;\n\n\t\tmesh.castShadow = true;\n\t\tmesh.receiveShadow = true;\n\n\t\tmesh.materialTexture = materialTexture;\n\t\tmesh.materialWireframe = materialWireframe;\n\n\t\tthis._playingAnimation = false;\n\t\tthis._mixer = new THREE.AnimationMixer(mesh);\n\t\tthis._mesh = mesh;\n\n\t\tif(this._options.animation){\n\t\t\tthis.playAnimation(this._options.animation);\n\t\t}\n\n\t\treturn mesh;\n\t}\n\n\tplayAnimation(name, playOnce) {\n\t\tif(this._playingAnimation){\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = this._options;\n\t\tconst mixer = this._mixer = new THREE.AnimationMixer(mesh);\n\t\tconst mesh = this._mesh;\n\t\tconst timeScale = options.animTimeScale;\n\n\t\t//speed animation up by <timeScale>\n\t\t//duration is now <duration>/<timeScale>\n\t\tmixer.timeScale = timeScale;\n\n\t\tif(!mesh){\n\t\t\treturn;\n\t\t}\n\n\t\tconst clip = THREE.AnimationClip.findByName(mesh.geometry.animations, name);\n\n\t\tif(!clip){\n\t\t\treturn;\n\t\t}\n\n\t\tconst action = new THREE.AnimationAction(clip, mixer.time).setLocalRoot(mesh);\n\n\t\tmixer.addAction(action);\n\t\tthis._playingAnimation = true;\n\n\t\tif(!playOnce){\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tmixer.removeAction(action);\n\t\t\tthis._playingAnimation = false;\n\t\t}, (clip.duration/timeScale)*1000);\n\t}\n\n\tupdate() {\n\t\tconst delta = this._clock.getDelta();\n\t\tif(this._mixer) this._mixer.update(delta);\n\t}\n}\n","export default {\n  ratamahatta: {\n\t  path: '/ratamahatta/',\n\t  body: \"ratamahatta.md2\",\n\t  skins: [ \"ratamahatta.png\", \"ctf_b.png\", \"ctf_r.png\", \"dead.png\", \"gearwhore.png\" ],\n\t  weapons:  [\n\t  \t[ \"weapon.md2\", \"weapon.png\" ],\n\t\t\t[ \"w_bfg.md2\", \"w_bfg.png\" ],\n\t\t\t[ \"w_blaster.md2\", \"w_blaster.png\" ],\n\t\t\t[ \"w_chaingun.md2\", \"w_chaingun.png\" ],\n\t\t\t[ \"w_glauncher.md2\", \"w_glauncher.png\" ],\n\t\t\t[ \"w_hyperblaster.md2\", \"w_hyperblaster.png\" ],\n\t\t\t[ \"w_machinegun.md2\", \"w_machinegun.png\" ],\n\t\t\t[ \"w_railgun.md2\", \"w_railgun.png\" ],\n\t\t\t[ \"w_rlauncher.md2\", \"w_rlauncher.png\" ],\n\t\t\t[ \"w_shotgun.md2\", \"w_shotgun.png\" ],\n\t\t\t[ \"w_sshotgun.md2\", \"w_sshotgun.png\" ]\n\t\t]\n\t},\n\togro: {\n\t  path: \"/ogro/\",\n\t\tbody: \"ogro.md2\",\n\t\tskins: [\n\t\t\t\"grok.jpg\", \"ogrobase.png\", \"arboshak.png\", \"ctf_r.png\", \"ctf_b.png\", \"darkam.png\", \"freedom.png\",\n\t\t \t\"gib.png\", \"gordogh.png\", \"igdosh.png\", \"khorne.png\", \"nabogro.png\",\n\t\t \t\"sharokh.png\"\n\t\t],\n\t\tweapons:  [ [ \"weapon.md2\", \"weapon.jpg\" ] ]\n\t}\n};\n","import CONFIG from '../../config';\nimport CHARACTERS_CONFIG from './charactersConfig';\n\nexport default class Character {\n  constructor(userOptions = {}) {\n    const options = this._options = Object.assign({\n      character: 'ratamahatta',\n      skin: 0,\n      animation: 'stand'\n    }, userOptions);\n\n    const charConfig = CHARACTERS_CONFIG[options.character];\n    const character = this._createCharacter(charConfig);\n\n    this._eventListeners = {};\n    this._clock = new THREE.Clock();\n\n    this._character = character;\n  }\n\n  on(event, callback) {\n    if(typeof this._eventListeners[event] !== 'array'){\n      this._eventListeners[event] = [];\n    }\n    this._eventListeners[event].push(callback);\n  }\n\n  _triggerEvent(event) {\n    const listeners = this._eventListeners[event];\n\n    if(typeof listeners === 'object'){\n      listeners.forEach(callback => {\n        callback(this.getRaw());\n      });\n    }\n  }\n\n  _createCharacter(charConfig) {\n    const options = this._options;\n    const character = new THREE.MD2Character();\n\n    character.scale = .5;\n\n    character.onLoadComplete = () => {\n      this.setSkin(options.skin);\n      this.setAnimation(options.animation);\n\n      if(typeof options.weapon === 'number'){\n        this.setWeapon(options.weapon);\n      }\n\n      if (typeof options.x === 'number') {\n        character.root.position.x = options.x;\n      }\n\n      if (typeof options.y === 'number') {\n        character.root.position.y = options.y;\n      }\n\n      if (typeof options.z === 'number') {\n        character.root.position.z = options.z;\n      }\n\n      this._triggerEvent('create');\n    };\n\n    charConfig.baseUrl = CONFIG.paths.models+charConfig.path;\n    character.loadParts(charConfig);\n\n    return character;\n  }\n\n  setSkin(idx) {\n    //character.skinsBody\n    this._character.setSkin(idx);\n  }\n\n  setWeapon(idx) {\n    //character.weapons\n    this._character.setWeapon(idx);\n  }\n\n  setAnimation(name) {\n    //character.meshBody.geometry.animations\n    this._character.setAnimation(name);\n  }\n\n  getRaw() {\n    return this._character;\n  }\n\n  update() {\n    const delta = this._clock.getDelta();\n    this._character.update(delta);\n  }\n}\n","export default {\n  init(element, camera, controls){\n    this._controls = new THREE.PointerLockControls(camera);\n    this._element = element;\n    this._bindEvents();\n  },\n\n  getControls() {\n    return this._controls;\n  },\n\n  getEnabled(){\n    return this._controls.enabled;\n  },\n\n  _bindEvents(){\n    document.body.addEventListener('click', this._requestLock.bind(this));\n    document.addEventListener('pointerlockchange', this._onLockChange.bind(this), false);\n    document.addEventListener('mozpointerlockchange', this._onLockChange.bind(this), false);\n    document.addEventListener('webkitpointerlockchange', this._onLockChange.bind(this), false);\n  },\n\n  _requestLock(){\n    const element = this._element;\n    element.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;\n    element.requestPointerLock();\n  },\n\n  _onLockChange(){\n    const element = this._element;\n    if (document.pointerLockElement === element ||\n      document.mozPointerLockElement === element ||\n      document.webkitPointerLockElement === element) {\n      console.log('Pointer locked');\n      this._controls.enabled = true;\n    } else {\n      console.log('Pointer lock removed');\n      this._controls.enabled = false;\n    }\n  }\n};\n","export default {\n  init(camera) {\n    this._raycaster = new THREE.Raycaster();\n    this._mouse = new THREE.Vector2();\n    this._camera = camera;\n    this._bindEvents();\n  },\n\n  _bindEvents() {\n    const node = document.querySelector('.cursor');\n    node.setAttribute('style', 'position: absolute; top: 50%; left: 50%; width: 5px; height: 5px; border: solid 1px red; border-radius: 100%; margin: -10px 0 0 -10px; z-index 99;');\n    window.addEventListener('mousemove', this._onMouseMove.bind(this));\n  },\n\n  _onMouseMove(event) {\n    // calculate mouse position in normalized device coordinates\n    // (-1 to +1) for both components\n    const x = ( event.clientX / window.innerWidth ) * 2 - 1;\n    const y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n\n    this._mouse.x = x;\n    this._mouse.y = y;\n  },\n\n  checkCollidingWithObjects(objects, maxDistance = null) {\n    const raycaster = this._raycaster;\n\n    if (maxDistance) {\n      raycaster.far = maxDistance;\n    }\n\n    // update the picking ray with the camera and mouse position\n    raycaster.setFromCamera(this._mouse, this._camera);\n\n    // calculate objects intersecting the picking ray\n    let intersects = raycaster.intersectObjects(objects);\n\n    for (const {object} of intersects) {\n      object.material.color.set(0xff0000);\n    }\n\n    return intersects;\n  }\n};","export default {\n  init(controls, collisionObjects, options) {\n    this._controls = controls;\n    this._options = options;\n\n    this._collisionObjects = collisionObjects;\n    this._raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(0, -1, 0), 0, 10);\n\n    this._movement = {\n      forward: false,\n      backward: false,\n      right: false,\n      left: false,\n      canJump: false\n    };\n\n    this._velocity = new THREE.Vector3();\n    this._prevTime = performance.now();\n\n    this._bindKeyEvents();\n  },\n\n  getCurrMovement() {\n    const movement = this._movement;\n\n    for (const key in movement) {\n      if(!movement[key]){\n        continue;\n      }\n\n      if (['forward', 'backward', 'right', 'left'].indexOf(key) !== -1 && movement.canJump !== false) {\n        //walking and not jumping\n        return 'walking';\n      } else if(key === 'canJump'){\n        //jumping\n        return 'jumping'\n      } else {\n        //not walking, not jumping = idle\n        return 'idle';\n      }\n    }\n  },\n\n  checkMovement() {\n    const controls = this._controls;\n    const velocity = this._velocity;\n    const movement = this._movement;\n    const options = this._options;\n\n    const time = performance.now();\n    const delta = (time - this._prevTime) / 1000;\n\n      //update velocity\n    velocity.x -= velocity.x * 10.0 * delta;\n    velocity.z -= velocity.z * 10.0 * delta;\n    velocity.y -= 9.8 * 100.0 * delta; // 100.0 = mass\n\n    //check directional movement\n    if(movement.forward) velocity.z -= options.movementSpeed * delta;\n    if(movement.backward) velocity.z += options.movementSpeed * delta;\n    if(movement.left) velocity.x -= options.movementSpeed * delta;\n    if(movement.right) velocity.x += options.movementSpeed * delta;\n\n    //objects collision detection\n    const isOnObject = this._checkObjectsCollision();\n    if (isOnObject) {\n      velocity.y = Math.max(0, velocity.y);\n      movement.canJump = true;\n    }\n\n    //update controls\n    const controlsObject = controls.getObject();\n    controlsObject.translateZ(velocity.z * delta);\n    controlsObject.translateY(velocity.y * delta);\n    controlsObject.translateX(velocity.x * delta);\n\n    //detect floor\n    if (controls.getObject().position.y < 20) {\n      velocity.y = 0;\n      controlsObject.position.y = 20;\n      movement.canJump = true;\n    }\n\n    this._prevTime = time;\n  },\n\n  _checkObjectsCollision() {\n    const raycaster = this._raycaster;\n    const objects = this._collisionObjects;\n    const controls = this._controls;\n\n    raycaster.ray.origin.copy(controls.getObject().position);\n    raycaster.ray.origin.y -= 10;\n\n    const intersections = raycaster.intersectObjects(objects);\n    const isOnObject = intersections.length > 0;\n\n    return isOnObject;\n  },\n\n  _bindKeyEvents() {\n    document.addEventListener('keydown', ({keyCode}) => this._checkKeys(keyCode, true), false);\n    document.addEventListener('keyup', ({keyCode}) => this._checkKeys(keyCode, false), false);\n  },\n\n  _checkKeys(keyCode, setToVal) {\n    const options = this._options;\n    switch(keyCode){\n      case 87: //w\n        this._movement.forward = setToVal;\n        break;\n      case 83: //s\n        this._movement.backward = setToVal;\n        break;\n      case 68: // d\n        this._movement.right = setToVal;\n        break;\n      case 65: // a\n        this._movement.left = setToVal;\n        break;\n      case 32: // space\n        if(setToVal === true){ //keydown\n          if(this._movement.canJump || options.enableSuperJump){\n            this._velocity.y += this._options.jumpHeight;\n          }\n          this._movement.canJump = false;\n        }\n        break;\n    }\n  }\n};\n","export default {\n\trand(min, max) {\n\t\treturn Math.floor((Math.random() * max) + min);\n\t}\n};\n","import CONFIG from '../config';\nimport utils from './utils';\n\nexport default {\n  generateRenderer(clearHex) {\n    const renderer = new THREE.WebGLRenderer();\n    renderer.setClearColor(clearHex);\n    renderer.setPixelRatio(window.devicePixelRatio || 1);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    return renderer;\n  },\n\n  generateFloor() {\n    const geometry = new THREE.PlaneGeometry(2000, 2000, 100, 100);\n\n    geometry.rotateX(-Math.PI/2);\n\n    for (let i = 0, l = geometry.vertices.length; i < l; i++) {\n      const vertex = geometry.vertices[i];\n      vertex.x += Math.random() * 20;\n      vertex.z += Math.random() * 20;\n      vertex.y += Math.random();\n    }\n\n    for (let i = 0, l = geometry.faces.length; i < l; i++) {\n      const face = geometry.faces[i];\n      const colors = [];\n\n      for(let j = 0; j < 3; j++){\n        const color = new THREE.Color(`rgb(${utils.rand(100,180)},${utils.rand(100,180)},${utils.rand(100,180)})`);\n        colors.push(color);\n      }\n\n      for(let j = 0; j < 3; j++){\n        face.vertexColors[j] = colors[j];\n      }\n    }\n\n    const material = new THREE.MeshBasicMaterial({ vertexColors: THREE.VertexColors });\n    return new THREE.Mesh(geometry, material);\n  },\n\n  generateBoxes(amount, texturePath, callback) {\n    const textureLoader = new THREE.TextureLoader();\n\n    const doGenerate = (crateTexture) => {\n      let mesh;\n      const boxes = [];\n\n      for(let i = 0; i < amount; i++){\n          mesh = this._generateBox({\n            width: 20,\n            height: 20,\n            depth: 20,\n            rgb: [55,81,159],\n            texture: crateTexture\n          });\n\n          mesh.position.x = Math.floor( Math.random() * 20 - 10 ) * 20;\n          mesh.position.y = Math.floor( Math.random() * 20 ) * 20 + 10;\n          mesh.position.z = Math.floor( Math.random() * 20 - 10 ) * 20;\n\n          mesh.rotation.y = -100;\n          boxes.push(mesh);\n        }\n\n        callback(boxes);\n      };\n\n      textureLoader.load(CONFIG.paths.img+texturePath, crateTexture => {\n      doGenerate(crateTexture);\n    });\n  },\n\n  _generateBox(options) {\n    const width = options.width;\n    const height = options.height;\n    const depth = options.depth;\n    const rgb = options.rgb;\n    const box = new THREE.BoxGeometry(width, height, depth);\n    let material;\n\n    if(options.texture){\n      material = new THREE.MeshPhongMaterial({\n        map: options.texture\n      });\n    } else {\n      material = new THREE.MeshBasicMaterial({\n        vertexColors: THREE.VertexColors\n      });\n\n      let face;\n      let color;\n\n      for (let i = 0; i < box.faces.length; i++) {\n        face = box.faces[i];\n        color = new THREE.Color(`rgb(${rgb[0]+(i*4)},${rgb[1]+(i*4)},${rgb[0]+(i*4)})`);\n        face.color = color;\n      }\n    }\n\n    return new THREE.Mesh(box, material);\n  }\n};\n","import CONFIG from './config';\nimport utils from './libs/utils';\nimport worldHelper from './libs/worldHelper';\nimport lockControlsHelper from './libs/lockControlsHelper';\nimport movementHelper from './libs/movementHelper';\nimport mouseHelper from './libs/mouseHelper';\nimport * as components from './components';\n\nlet scene = null;\nlet camera = null;\nlet renderer = null;\nlet stats = null;\n\nconst componentsToUpdate = Object.values(components).filter(({update}) => (typeof update === 'function'));\nconst containerNode = document.body;\n\ninitStats();\ninit();\nupdate();\n\nfunction init() {\n  scene = new THREE.Scene();\n  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);\n\n  //light\n  const light = new THREE.HemisphereLight(0xffffff, 0xaaaaaa, 0.6);\n  scene.add(light);\n\n  //floor\n  const floorMesh = worldHelper.generateFloor();\n  scene.add(floorMesh);\n\n  //renderer\n  renderer = worldHelper.generateRenderer(0x0f445c);\n  containerNode.appendChild(renderer.domElement);\n\n  lockControlsHelper.init(containerNode, camera);\n  const controls = lockControlsHelper.getControls();\n  scene.add(controls.getObject());\n\n  //boxes\n  components.boxes.init(scene, (boxes) => {\n    movementHelper.init(controls, boxes, {\n      movementSpeed: CONFIG.movement.speed,\n      jumpHeight: CONFIG.movement.jumpHeight,\n      enableSuperJump: CONFIG.movement.enableSuperJump\n    });\n\n    //characters\n    components.characters.init(scene, boxes);\n    mouseHelper.init(camera);\n\n    //weapon\n    components.playerWeapon.init(camera);\n    components.playerWeapon.onAnimation('pow', () => {\n      const collidingBoxes = mouseHelper.checkCollidingWithObjects(window.boxes);\n      for (const {object} of collidingBoxes) {\n        scene.remove(object);\n      }\n    });\n\n    window.boxes = boxes;\n  });\n}\n\nfunction update(){\n  stats.begin();\n\n  if(lockControlsHelper.getEnabled()){\n    movementHelper.checkMovement();\n\n    for (const component of componentsToUpdate) {\n      component.update();\n    }\n  }\n\n  renderer.render(scene, camera);\n\n  stats.end();\n  requestAnimationFrame(update);\n}\n\nfunction initStats(){\n  stats = new Stats();\n  stats.setMode(0);\n\n  stats.domElement.style.position = 'absolute';\n  stats.domElement.style.left = '0px';\n  stats.domElement.style.top = '0px';\n  containerNode.appendChild(stats.domElement);\n}\n"]}